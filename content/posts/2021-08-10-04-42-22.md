---
title: "Abobus"
date: 2021-08-10 04:42:22
draft: false
---

Как рефакторит код на (pic. 1) нормальный человек:
- На 4 и 9 строке повтор - создание нового стека.
- Вынесем повторяющийся код в setUp для тестов, стек в поля класса.
- конец
Получается код на (pic. 2).

Как рефакторит код админ, который недоумевает, почему макросов нет в каждом языке (в том числе и Java, в которой приведен пример кода):
- В строках 2-6 и 7-12 повторяющийся код, отличается только названием теста и кодом после инициализации стека.
- Вынесем весь этот код в макрос.
- конец
Получился бы код, похожий на (pic. 3).
В итоге:
- меньше повторов;
- не используется специальная конструкция setUp, сделанная специально для тестов, специально для выполнения в начале каждого теста. Вместо этого используется только средство языка макрос (если бы они были);
- определение макроса не влияет на все тесты. Можно определить макрос для тестов, в которых стек инициализируется значениями, или используются два стека, и это никак не заденет другие тесты. В случае с setUp для этого придется делать несколько классов, а в Java это означает еще и несколько файлов. В итоге либо дублирование кода, но тесты в одном классе, либо все тесты в одном классе, но в инициализации мешанина, либо тесты в разных классах.

            "url": "https://sun9-43.userapi.com/impg/xhlBylyBc1q9KoQpvwJAXQUxnPmI5hY8kBn1og/xkyLEhGF40g.jpg?size=503x256&quality=96&sign=7253994c1711cd260610e74e99705c2e&c_uniq_tag=BRL9cvhb2cYw8M43vsmbzTdujDg8fhGrV3UoN-djW8E&type=album",
            "url": "https://sun9-23.userapi.com/impg/X3otcSb4rK6ofeMY4vhh3_vSBD7WegcuSFBzxQ/6HZMN5PYQrY.jpg?size=485x314&quality=96&sign=394ac879896d29a07a82745fe53e6390&c_uniq_tag=N-h4llivZHNrF4oWjuoDeFe-VjrDIET4t3yS_HYYi1A&type=album",
            "url": "https://sun9-85.userapi.com/impg/irAffcyn-HUUyA66tZBbWU1bIEbTpfpxYu7eVQ/Z7ytKzGfhmM.jpg?size=444x329&quality=96&sign=d3499cccba7cbe37b5f9c0ac9b296496&c_uniq_tag=nlp1088rwhJart19gVCkQYhWCmIWhmrqh9BJT5UieW8&type=album",
